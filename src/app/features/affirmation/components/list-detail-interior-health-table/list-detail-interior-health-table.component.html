<p-confirmDialog key="confirmDeleteDialog"></p-confirmDialog>

<p-confirmdialog #cd>
    <ng-template #headless let-message let-onAccept="onAccept" let-onReject="onReject">
        <div class="flex flex-col items-center p-8 bg-surface-0 rounded">
            <div
                class="rounded-full bg-primary text-primary-contrast inline-flex justify-center items-center h-24 w-24 -mt-20"
            >
                <i class="pi pi-credit-card !text-5xl"></i>
            </div>
            <span class="font-bold text-2xl block mb-2 mt-6">{{ message.header }}</span>
            <div class="space-y-4 max-w-xl w-full">
                <div *ngFor="let method of paymentMethods"
                     class="rounded-xl border p-5 flex items-center justify-between cursor-pointer transition-all"
                     [ngClass]="{
                       'border-blue-500 ring-2 ring-blue-300 bg-blue-50': selectedMethod === method.id,
                       'border-gray-300 hover:bg-gray-50': selectedMethod !== method.id
                     }"
                     (click)="selectedMethod = method.id">
              
                  <!-- Left: Logos y texto -->
                  <div class="flex items-center space-x-4">
                    <!-- Logos -->
                    <div class="flex items-center space-x-2">
                      <img *ngFor="let logo of method.logos"
                           [src]="logo"
                           alt="logo"
                           class="h-9 object-contain" />
                    </div>
              
                    <!-- Texto -->
                    <div>
                      <div class="font-semibold text-lg text-gray-800">{{ method.label }}&nbsp;&nbsp;&nbsp;</div>
                       
                    </div>
                  </div>
              
                  <!-- Right: Radio -->
                  <p-radioButton name="payment" [value]="method.id" [(ngModel)]="selectedMethod" inputId="{{ method.id }}"></p-radioButton>
                </div>
              </div>
            <div class="flex items-center gap-2 mt-6 w-full ">
                <p-button label="Cancelar" [outlined]="true" class="w-full" (onClick)="onReject()" styleClass="mt-3 m-1   !w-full bg-RED_STRONG border-[0px] h-[47px] flex items-center justify-center text-[17px] text-white font-bold rounded-full"></p-button>
                <p-button label="Aceptar" (onClick)="onAccept()" class="w-full" styleClass="mt-3 m-1   !w-full bg-PRIMARY_COLOR border-[0px] h-[47px] flex items-center justify-center text-[17px] text-white font-bold rounded-full"></p-button>
            </div>
        </div>
    </ng-template>
</p-confirmdialog>

<p-table [value]="data"  styleClass="p-datatable-sm" styleClass="p-datatable-gridlines border-round overflow-hidden" showGridlines>
    <ng-template pTemplate="caption">
        <div class="flex justify-between">
            &nbsp;
        <div class="flex">
            <button
                 (click)="howOpenHealthList()"
                class="cursor-pointer text-MAIN_WHITE text-[18px] font-semibold bg-PRIMARY_COLOR flex items-center flex-row rounded-lg justify-center gap-2"
                style="padding: 10px"
            >
           
                <svg
                width="20"
                height="20"
                viewBox="0 0 17 18"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
                class="w-[20px] h-[20px]"
                >
                <path
                    _ngcontent-ng-c3051437113=""
                    d="M0.577969 11.27V7.28H16.433V11.27H0.577969ZM6.49297 0.945H10.553V17.57H6.49297V0.945Z"
                    fill="currentColor"
                ></path>
                </svg>
                <span class="text-white-300 !font-semibold">Agregar participantes</span>
            </button>

            <button  
                 (click)="howOpenHealthListServers()"
                class="ml-5 cursor-pointer text-MAIN_WHITE text-[18px] font-semibold bg-PRIMARY_COLOR flex items-center flex-row rounded-lg justify-center gap-2"
                style="padding: 10px;background: #5c8dc2 !important;"
            >
           
                <svg
                width="20"
                height="20"
                viewBox="0 0 17 18"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
                class="w-[20px] h-[20px]"
                >
                <path
                    _ngcontent-ng-c3051437113=""
                    d="M0.577969 11.27V7.28H16.433V11.27H0.577969ZM6.49297 0.945H10.553V17.57H6.49297V0.945Z"
                    fill="currentColor"
                ></path>
                </svg>
                <span class="text-white-300 !font-semibold">Agregar Servidores</span>
            </button>

            <button
            (click)="howOpenPdf(2)"
                class="ml-5 cursor-pointer text-MAIN_WHITE text-[18px] font-semibold bg-PRIMARY_COLOR flex items-center flex-row rounded-lg justify-center gap-2"
                style="padding: 10px"
            >
            <svg fill="#ffffff" version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" 
                width="25px" height="25px" viewBox="0 0 31.256 31.256"
                xml:space="preserve">
            <g>
                <g>
                    <path d="M13.153,12.339c0.169,1.766,0.251,5.123-1.091,7.763c-0.109,0.213-0.217,0.42-0.325,0.618
                        c-2.334,0.716-4.799,2.072-5.21,3.565c-0.161,0.59-0.013,1.18,0.406,1.619c0.437,0.455,0.98,0.697,1.574,0.697
                        c1.437,0,2.931-1.371,4.563-4.187c0.592-0.146,4.003-0.562,4.72-0.554c1.967,2.011,3.559,2.988,4.859,2.988
                        c0.816,0,1.519-0.412,1.929-1.133c0.284-0.504,0.285-1.086,0.003-1.597c-0.816-1.474-3.994-2.074-5.9-2.211
                        c-0.164-0.179-0.33-0.365-0.5-0.558c-1.952-2.23-2.75-5.506-3.045-7.218c-0.037-0.392-0.079-0.718-0.114-0.957
                        c-0.126-0.906-0.695-1.042-1.023-1.042c-0.285,0-0.558,0.123-0.747,0.338c-0.305,0.346-0.259,0.72-0.229,0.97
                        C13.051,11.686,13.095,12.01,13.153,12.339z M8.591,24.6c0.187-0.207,0.552-0.512,1.105-0.842C9.18,24.318,8.8,24.549,8.591,24.6z
                        M22.545,22.857c-0.167-0.021-0.485-0.105-0.995-0.418C21.99,22.582,22.325,22.73,22.545,22.857z M14.886,17.92
                        c0.365,0.741,0.771,1.416,1.217,2.021c-0.218,0.021-1.756,0.22-1.892,0.237C14.495,19.482,14.72,18.727,14.886,17.92z"/>
                    <path d="M11.089,0L2.995,8.546v22.71h25.266V0H11.089z M10.375,3.594v3.787H6.788L10.375,3.594z M26.306,29.302H4.948V9.335h7.381
                        V1.954h13.979v27.348H26.306z"/>
                </g>
            </g>
            </svg>
            <span class="text-white-300 !font-semibold">Generar reporte</span>



            </button>

            <button
            (click)="howOpenPdf(5)"
                class="ml-5 cursor-pointer text-MAIN_WHITE text-[18px] font-semibold bg-PRIMARY_COLOR flex items-center flex-row rounded-lg justify-center gap-2"
                style="padding: 10px"
            >
            <svg fill="#ffffff" version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" 
                width="25px" height="25px" viewBox="0 0 31.256 31.256"
                xml:space="preserve">
            <g>
                <g>
                    <path d="M13.153,12.339c0.169,1.766,0.251,5.123-1.091,7.763c-0.109,0.213-0.217,0.42-0.325,0.618
                        c-2.334,0.716-4.799,2.072-5.21,3.565c-0.161,0.59-0.013,1.18,0.406,1.619c0.437,0.455,0.98,0.697,1.574,0.697
                        c1.437,0,2.931-1.371,4.563-4.187c0.592-0.146,4.003-0.562,4.72-0.554c1.967,2.011,3.559,2.988,4.859,2.988
                        c0.816,0,1.519-0.412,1.929-1.133c0.284-0.504,0.285-1.086,0.003-1.597c-0.816-1.474-3.994-2.074-5.9-2.211
                        c-0.164-0.179-0.33-0.365-0.5-0.558c-1.952-2.23-2.75-5.506-3.045-7.218c-0.037-0.392-0.079-0.718-0.114-0.957
                        c-0.126-0.906-0.695-1.042-1.023-1.042c-0.285,0-0.558,0.123-0.747,0.338c-0.305,0.346-0.259,0.72-0.229,0.97
                        C13.051,11.686,13.095,12.01,13.153,12.339z M8.591,24.6c0.187-0.207,0.552-0.512,1.105-0.842C9.18,24.318,8.8,24.549,8.591,24.6z
                        M22.545,22.857c-0.167-0.021-0.485-0.105-0.995-0.418C21.99,22.582,22.325,22.73,22.545,22.857z M14.886,17.92
                        c0.365,0.741,0.771,1.416,1.217,2.021c-0.218,0.021-1.756,0.22-1.892,0.237C14.495,19.482,14.72,18.727,14.886,17.92z"/>
                    <path d="M11.089,0L2.995,8.546v22.71h25.266V0H11.089z M10.375,3.594v3.787H6.788L10.375,3.594z M26.306,29.302H4.948V9.335h7.381
                        V1.954h13.979v27.348H26.306z"/>
                </g>
            </g>
            </svg>
            <span class="text-white-300 !font-semibold">Generar reporte para lideres</span>



            </button>


        </div>
        </div>
    </ng-template>
    <ng-template pTemplate="header">
        <tr>
          <th>No</th>
          <th>Identidad</th>
          <th>Nombres</th>
          <th>Apellidos</th>
          <th>Edad</th>
          <th>Celular</th>
          <th>Tipo</th>
          <th>Opciones</th>
        </tr>
    </ng-template>
    <ng-template pTemplate="body" let-dataAffirmation let-rowIndex="rowIndex" >
        <tr>
            <td>{{ rowIndex+1 }}</td>
            <td>{{ dataAffirmation.person.identity }}</td>
            <td>{{ dataAffirmation.person.names }}</td>
            <td>{{ dataAffirmation.person.surname }}</td>
            <td>{{ dataAffirmation.person.birth_date | age }}</td>
            <td>{{ dataAffirmation.person.phone }}</td>
            <td>
                <p-tag [value]="dataAffirmation.typeOfHealth.name" severity="info" />
            </td>
            <td style="width:120px" class="text-center">
                <p-button [disabled]="dataAffirmation.attended"  (click)="onDeleteActivity(dataAffirmation)" class="mr-2 w-2" icon="pi pi-trash" severity="danger" pTooltip="Eliminar registro" tooltipPosition="left" />
                @if (!dataAffirmation.attended) {
                    <p-button   (click)="onActivateActivity(dataAffirmation)" class="mr-2 w-2" icon="pi pi-check" severity="success" pTooltip="Asistencia" tooltipPosition="left" />
                }@else {
                    <p-button   (click)="onActivateActivityCandell(dataAffirmation)" class="mr-2 w-2" icon="pi pi-times-circle" severity="warn" pTooltip="Asistencia" tooltipPosition="left" />
                }
            </td>
        </tr>
    </ng-template>
</p-table>

@if (data.length === 0) {
    <section class="section-none mt-4">
        <div >No se encontraron participante para este evento</div>
    </section>
}